<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title> Understanding Autonomous Systems </title>
<link href="../../css/layout.css" rel="stylesheet" type="text/css" />
<link href="../../css/main.css" rel="stylesheet" type="text/css" />
<link href="../../css/print.css" rel="stylesheet" type="text/css" media="print" />
<link href="../../css/main-print.css" rel="stylesheet" type="text/css" media="print" />
<style type="text/css">

#main table.doclist {
	width: 80%;
}
#main .doclist .date, #main .doclist .item {
        vertical-align: baseline; /* for opera */
}
#main .doclist tr {
        vertical-align: baseline;
}
#main .doclist th.item {
        text-align: left;
}
#main .doclist td.item {
        text-align: left;
}
#main a.linksign:link, #main a.linksign:visited, #main a.linksign a:hover {
        text-decoration: none;
}

</style>
</head>
<body id="s_ru419">
<div id="wrapper">
<!-- _______________________________________ BANNER _______________________________________ -->
<div id="banner">
  <div id="logo">
  <img src="../../css/images/pk-org-pencil.png" alt="pk.org" name="logo" width="122" height="45"/>
  </div>
  <div id="title"> Internet Technology </div>
  <div id="search">
  <form method="get" action="http://www.google.com/search">
	<div style="border:none ;padding:2px;width:25em;">
	<input type="text" name="q" size="25" maxlength="255" value="" />
	<input type="submit" value="Search" />
	<input type="hidden"  name="sitesearch" value="www.pk.org" checked />
	</div>
  </form>
  </div>
  <ul>
    <li class="separator"><a href="../../about/index.html">About</a></li>
    <li class="separator"><a href="../../about/contact.html">Contact</a></li>
    <li><a href="../../sitemap.html">Site map</a></li>
  </ul>
</div>

<!-- _______________________________________ MAIN NAV _______________________________________ -->
<div id="navbar">
	<ul>
	<li class="homelink"><a href="../../index.html">Home</a></li>
<!--
	<li class="aboutlink"><a href="../../about/index.html">About</a></li>
-->
	<li class="ru"><a href="../../rutgers/index.html">Rutgers</a></li>
	<li class="ru352"><a href="../../352/index.html">Internet Technology [352]</a></li>
	<li class="ru416"><a href="../../416/index.html">Operating Systems [416]</a></li>
	<li class="ru417"><a href="../../417/index.html">Distributed Systems [417]</a></li>
	<li class="ru419"><a href="../../419/index.html">Computer Security [419]</a></li>
	<li class="cslink"><a href="../../cs/index.html">Computing</a></li>
	<li class="photolink"><a href="../../photo/index.html">Photography</a></li>
<!--
	<li class="funlink"><a href="#">Coming</a></li>
	<li class="funlink"><a href="#">Soon</a></li>
-->
	</ul>
</div>

<div id="subnav">
You are in:
</p>
<ul>
        <li class="first"> <a href="<\$=home>index.html"> Home </a>
        <li> <a href="../../rutgers/index.html"> Rutgers </a>
        <li> <a href="../index.html"> CS 419 </a>
        <li> <a href="../notes/index.html"> Documents </a>
        <li> <a href="../notes/autonomous_systems.html"> Understanding Autonomous Systems </a>
</ul>
</div>
<div id="content-wrapper">
<div id="main">
<div id="headline">
<h1> Understanding Autonomous Systems </h1>
<h2> Routing and Peering </h2>
<p class="author"> Paul Krzyzanowski </p>
<p class="date"> March 21, 2016 </p>
</div>
<h1 id="autonomoussystems">Autonomous Systems</h1>

<p>An <strong>Autonomous System</strong> (<strong>AS</strong>) is a collection of routers whose prefixes
and routing policies are under common administrative control. This
could be a network service provider, a large company, a university, a
division of a company, or a group of companies. The AS represents
a connected group of one or more blocks of IP addresses, called IP
prefixes, that have been assigned to that organization and provides
a single routing policy to systems outside the AS.
An IP prefix is a group of IP addresses expressed in CIDR form (i.e., address/bits,
such as 128.6.0.0/16).
Autonomous Systems create a two-level hierarchy for routing in the Internet.
Routing between Autonomous Systems (<strong>inter-AS routing</strong>) is external
to the AS and allows one AS to send traffic to another AS.
Note that most organizations do not
interconect via autonomous systems but simply connect to a single
ISP, which may be an autonomous system.</p>

<p>Routers within an AS use an <strong>Interior Gateway Protocol</strong> (<strong>IGP</strong>), which
handles routing between nodes inside the AS. Common interior gateway
protocols include RIP, OSPF, IS-IS, EIGRP, as well as some proprietary
protocols such as IGRP.
Routing within an Autonomous System (<strong>intra-AS routing</strong>) is internal
to that AS and invisible to those outside it. The AS administrator
decides what routing algorithm should run within it.</p>

<p>To get traffic from a host in one AS to a host in another AS,
the autonomous systems need to be connected. Most ASes do not share a
direct link with each other, in which case data traffic may be routed through the
networks of other ASes that agree to carry the traffic.
An <strong>Exterior Gateway Protocol</strong> (<strong>EGP</strong>) is a routing protocol that handles
routing between Autonomous Systems (inter-AS routing). BGP version 4, the Border
Gateway Protocol, is the standard EGP for inter-AS routing.
At some point in the future, the Internet is expected to adopt IDRP,
the OSI Inter-Domain Routing protocol.</p>

<h2 id="inter-asrouting">Inter-AS Routing</h2>

<figure>
<img src="images/inter-as-sm.png" alt="Figure 1. Inter-AS routing" id="inter-as-sm" title="Inter-AS routing" style="width:200px;" />
<figcaption>Figure 1. Inter-AS routing</figcaption></figure>



<p>A routing policy defines how routing information is exchanged between
the ASes. For example, suppose two ASes, ASx and ASy, are connected
to each other via a link between two gateway routers.
Suppose that ASx knows how to reach some network, NET&#8211;1, that is
defined by an IP prefix. This network may be within ASx or may be
external to it.
Suppose that ASy knows how to reach some other network, NET&#8211;2.</p>

<p>For systems on NET&#8211;1 to be able to send messages to systems on
NET&#8211;2, and vice versa, traffic will need to flow between ASx and
ASy. This means that ASx needs to announce to ASy that it has a
route to NET&#8211;1 and ASy needs to announce to ASx that it has a route
to NET&#8211;2. The exterior gateway protocol is used to do this. ASx and
ASy can then decide whether to accept this information or discard
it (if, for example, they have better routes to those networks).</p>

<h2 id="asassignment">AS assignment</h2>

<p>An AS has a globally unique 32-bit number associated with it<a href="#fn:1" id="fnref:1" title="see footnote" class="footnote">[1]</a>, called
an ASN (Autonomous System Number). If an Autonomous System exchanges
routing information with other Autonomous Systems on the public
Internet, it needs to have a unique ASN. This number is used in
exchanging exterior routing information, particularly in identifying
paths through multiple ASes via BGP, the <strong>Border Gateway Protocol</strong>.
AS numbers are assigned to
organizations by the Regional Internet Registry (RIR) for their
country (e.g., ARIN for the U.S. and Canada, for example, for a $500 fee).
Each RIR gets blocks of available AS numbers from the IANA
(Internet Assigned Numbers Authority). The process is similar to
that of assigning IP addresses. There are currently over 42,000
autonomous systems. The top-level list of IANA assignments of AS
numbers can be fond at
http://www.iana.org/assignments/as-numbers/as-numbers.xml</p>

<p>An ASN is not needed for a network that has a single connection to
an ISP and a single block of IP addresses (single prefix). The
prefix of this network should be managed by the AS of the provider
since the external routing policy of this network is the same as
that of its provider.</p>

<p>Autonomous systems may be connected
with multiple links and one autonomous system will often be connected to several
others for fault tolerance, to access different parts of the network, and to route
traffic between these different parts. Each autonomous system can decide who
they will exchange traffic with (that is, whether they will allow another AS to
route traffic through it).</p>

<h2 id="internettierspeeringandtransit">Internet Tiers, Peering, and Transit</h2>

<p>Since most ASes are not connected with each other, they need to route their
traffic through other ASes. </p>

<p><strong>Peering</strong> is when a pair of ASes establish a reciprocal agreement to
connect with each other to exchange traffic with
each other, without
charge. The assumption that each has an interest in connecting to the other&#8217;s customers, similar
to how postal systems throughout the world do not charge when mail is routed from one country
to another. </p>

<p><strong>Tier 1 ISPs</strong> are those that do not have to pay any other network for transit.
They peer with all other tier 1 networks (there are only about fourteen of these worldwide).
Given any IP address, a Tier 1 ISP will be able to connect directly to a top-level ISP
that can route to that address.
The United States has eight interconnection regions<a href="#fn:2" id="fnref:2" title="see footnote" class="footnote">[2]</a>
that create a &#8220;default free zone&#8221; where Tier 1 ISPs connect their networks together
in peering relationships.</p>

<p>Peering agreements are not necessarily transitive. If AS1 peers with AS2 and AS2 peers with AS3,
AS2 is not necessarily obligated to carry traffic to AS3. Whether this is permitted
or not is a business, rather than technical, decision.</p>

<p>A <strong>Transit</strong> relationship is when an ISP (an AS) sells access to the Internet.
It is when an AS agrees to act as a router, carrying traffic from one
AS and out to some other AS to which it has a link. The complete data path may,
of course involve multiple transit hops through different ASes. An AS will
typically meter the traffic on each link and charge a transit fee. Depending
on policy, an organization in one AS may be charged for traffic even to
the connected AS.</p>

<p>A <strong>Tier 2 ISP</strong> is one that needs to purchase Transit to connect to at least some
part of the Internet.
Because of transit fees, many Tier 2 ISPs will try to establish peering relations directly with
as many Tier 1 and other Tier 2 ISPs as they can so they can exchange traffic with
those ISPs for no fee (although, even in those cases, there may still be a peering fee &mdash;
it&#8217;s a business decision). For example, it is
common for cable and phone companies to peer with content providers such as Google, Amazon, and
Microsoft.</p>

<h2 id="internetbackbone">Internet Backbone</h2>

<p>The <strong>Internet Backbone</strong> is the collection of major connections (routers and links)
that connects large autonomous systems, typically Tier 1 networks, together. Like
the Internet, it s a distributed infrastructure that is managed by numerous
companies, universities, and other organizations.</p>

<h2 id="categoriesofautonomoussystems">Categories of Autonomous Systems</h2>

<figure>
<img src="images/transit-as-sm.png" alt="Figure 2. Transit AS: Az handling traffic between Ax and Ay" id="transit-as-sm" title="Transit AS" style="width:250px;" />
<figcaption>Figure 2. Transit AS: Az handling traffic between Ax and Ay</figcaption></figure>


<dl>
<dt>Stub versus transit AS</dt>
<dd>A <strong>stub autonomous system</strong> is an AS that is connected to only one other AS. Service from an ISP is
an example of this (or a lower-tier ISP that gets its service from another ISP).
A <strong>transit autonomous system</strong> is one that offers the ability to route data from
one AS to another AS. For example, if ASx can route date to ASy by going through ASz, ASz
is a transit AS. Transit may have financial repercussions: an ISP might, for example,
buy transit service from another ISP. At the AS level, we are not concerned what
the policy arrangements are and whether the transit relationship is one of free peering or paid transit.</dd>

<dt>A single-homed stub Autonomous System</dt>
<dd>A <strong>home</strong> is the network connection of a computer system or, in this case, an
organization&#8217;s network. A single-homed stub system is one that is connected with a single network
link. Internet service from a single ISP is an example of a single-homed system.
These systems
generally do not need AS numbers.</dd>

<dt>A multi-homed stub Autonomous System</dt>
<dd>This is a network that has one or more prefixes that are connected to more
than one service provider (more than one AS). The organization can define different policies
and preferences among the different autonomous systems to which it is connected. It will not,
based on policy, route data from one AS to another. Any traffic between the AS and outside
either originates or terminates at the AS.</dd>
</dl>


<p>As with IP addresses, there are also ranges of AS numbers that are reserved for private
use for organizations to use if they want to organize their internal systems into internal
ASes and use BGP to compute routes between them.</p>

<h1 id="references">References</h1>

<ul>
<li><p>American Registry for Internet Numbers,
<a href="https://www.arin.net/resources/routing/index.html">
ARIN Routing Registry Documentation</a></p></li>
<li><p>Mathew Caesar (UC Berkeley), Jennifer Rexford (Princeton University),
<a href="http://www.cs.princeton.edu/~jrex/papers/policies.pdf">
BGP routing policies in ISP networks</a></p></li>
<li><p>J. Hawkinson,
<a href="http://tools.ietf.org/html/rfc1930">RFC 1930</a>
Autonomous Systems.</p></li>
<li><p>Geoff Huston,
<a href="http://www.cisco.com/web/about/ac123/ac147/archived_issues/ipj_9-1/autonomous_system_numbers.html">
Exploring Autonomous System Numbers</a>, Cisco,
The Internet Protocol Journal: Volume 9, Number 1. </p></li>
<li><p>Mufaddal Makati,
<a href="http://www.rawbytes.com/the-internet-structure/5/">
The Internet Structure</a>,
Raw Bytes, December 30, 2012</p></li>
<li><p>William B. Norton,
<a href="The Art of Peering: The Peering Playbook">
http://www.blogg.ch/uploads/peering-playbook.pdf</a></p></li>
<li><p>William B. Norton,
<a href="http://www.nanog.org/meetings/nanog45/presentations/Norton_Peering101_v0_N45.pdf">
Peering 101</a>,
NANOG 45 Tutorial, derived from UC Berkeley talk, October 21, 2008.</p></li>
<li><p>Rudolph van der Berg,
<a href="http://arstechnica.com/features/2008/09/peering-and-transit/">
How the ‘Net works: an introduction to peering and transit</a>,
arstechnica, September 2, 2008</p></li>
<li><p><a href="http://en.wikipedia.org/wiki/Autonomous_System_(Internet)">Autonomous System</a>,
Wikipedia article</p></li>
</ul>

<p>This document is an updated version of one that was originally written on April 5, 2013.</p>

<div class="footnotes">
<hr />
<ol>

<li id="fn:1">
<p>AS numbers used to be 16 bits until around 2009. <a href="#fnref:1" title="return to article" class="reversefootnote">&#160;&#8617;</a></p>
</li>

<li id="fn:2">
<p>Atlanta, Chicago, Dallas, New York City, San Jose, Seattle, and Washington DC <a href="#fnref:2" title="return to article" class="reversefootnote">&#160;&#8617;</a></p>
</li>

</ol>
</div>

</div>
<div id="footer">
<hr/>
<style type="text/css">  
span.codedirection { unicode-bidi:bidi-override; direction: rtl; }  
</style>  

<p> &copy; 2003-2016 Paul Krzyzanowski. All rights reserved.</p>
<p>For questions or comments about this site, contact Paul Krzyzanowski, 
<span class="codedirection">gro.kp@ofnibew</span></p>
<p>The entire contents of this site are protected by copyright under national and international law.
No part of this site may be copied, reproduced, stored in a retrieval system, or transmitted, in any form,
or by any means whether electronic, mechanical or otherwise without the prior written
consent of the copyright holder.
If there is something on this page that you want to use, please let me know.
</p>
<p>Any opinions expressed on this page do not necessarily reflect the opinions of my employers and may not
even reflect mine own.  </p>
<p> Last updated: March 21, 2016 </p>
<img class="stamp" src="../..//css/images/recycled_pixels_logo.png" alt="recycled pixels" height="80" width="80" />
</div> <!-- footer -->
<div id="tear">
</div>


<div id="sidebar1">
<h1 class="first">Contents </h1>
	<h2> CS 419 </h2>
	<ul>
	<li> <a href="../index.html"> Main course page </a> </li>
	<li> <a href="../news.html"> News </a> </li>
	<li> <a href="../syllabus.html"> Syllabus </a> </li>
	<li> <a href="../hw/index.html"> Homework </a> </li>
	<li> <a href="../notes/index.html"> Documents </a> </li>
	<li> <a href="../exam/index.html"> Exam info </a> </li>
	<li> <a href="../grades/index.html"> Check your grades </a> </li>
	<li> <a href="https://sakai.rutgers.edu/portal/site/a89b56d4-d72e-4e3d-865e-f7acfbce9964"> Sakai </a> </li>
	<!-- <li> <a href="https://sakai.rutgers.edu/portal"> Sakai </a> </li> -->
	</ul>

	<h2> CS 419 background </h2>
	<ul>
	<li> <a href="../about.html"> About the course </a> </li>
	<li> <a href="../prereq.html"> Prerequisites </a> </li>
	<li> <a href="../things.html"> Things you need </a> </li>
	<li> <a href="../policy.html"> Policy  </a> </li>
	</ul>
</div>

<div id="sidebar2">
<!--
<h1 class="first"> Free junk </h1>
<p>
This is some stuff I'm throwing away. Please send me mail if you want any of it:
</p>
<hr/>
<ul>
<li> 
</ul>
-->
</div>

</div>
</div>
</body>
</html>
