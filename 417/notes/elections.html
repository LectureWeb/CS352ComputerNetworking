<!DOCTYPE HTML>
<!--
	Paul Krzyzanowski pk.org
	Derived from Editorial by HTML5 UP html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Distributed Agreement</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../../assets/css/main-article.css?v=1.3"/> <link rel="stylesheet" href="../../assets/css/ru-info.css?v=1.0" />
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
							<header id="header">
								<a href="../index.html" class="logo"><strong>Distributed Systems</strong>: Paul Krzyzanowski</a>
<!--
								<ul class="icons noprint">
									<li><a href="http://www.twitter.com/@p_k" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
									<li><a href="https://www.facebook.com/paul.krzyzanowski" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
									<li><a href="#" class="icon brands fa-snapchat-ghost"><span class="label">Snapchat</span></a></li>
									<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
								</ul>
-->
							</header>

							<!-- Content -->
							<section>
								<header class="main">
								<h1>Distributed Agreement</h1>
								<h2>Leader Election</h2>

								<p>Paul Krzyzanowski</p>
								<p>March 2, 2021</p>
								</header>
							</section>
							
							<section id="bodytext">
								<blockquote>
<p><strong>Goal</strong>: Allow all processes in a group to elect exactly one of the processes in the group. All processes should agree to elect the same process.</p>
</blockquote>

<p>Election algorithms are designed to allow a collection of
processes to agree upon a single <strong>coordinator</strong>, or <strong>leader</strong>. All candidate processes
are considered to be equally capable of acting as the leader.
The task is to select exactly one of these processes &#8212;
and make sure that
every process is aware of the selection. In designing these algorithms,
we assume that every process has a unique ID (for example, a process ID
combined with the machine&#8217;s address).
The algorithms we examine in this section will choose a winner
(the leader) by selecting either the highest available process ID
or the lowest one. It is important that whatever criteria is used
will never result in one process choosing a different winner than another
even multiple concurrent elections are run.</p>

<h3 id="bullyalgorithm">Bully algorithm</h3>

<p>The <strong>bully algorithm</strong> selects the largest process ID as the
leader. When a process detects a non-responding leader, it sends an
<em>ELECTION</em> message to all processes with a higher ID number
and waits for any replies.
If the process gets no replies within a certain time,
it announces itself as a leader.</p>

<p>When a process receives an
<em>ELECTION</em> message it immediately sends a response back to the
requestor (so the requestor won&#8217;t become the leader) and holds
an election to see if there are any higher-numbered processes that
will respond. If none respond, then it declares itself as leader.</p>

<h3 id="ringalgorithm">Ring algorithm</h3>

<p>The <strong>ring election algorithm</strong> requires arranging a logical communication ring
among the processes in the group (as we had in the token ring mutual
exclusion algorithm). When a process detects a non-responding
leader, it creates an <em>ELECTION</em> message containing its own
process ID and sends it to its successor &#8211; the next process in the ring. If that process
is dead, then it sends the message to the following successor.
This sequence
continues, with each process sending an <em>ELECTION</em> message to the next
process in the ring, skipping dead processes
until it finds a process that can receive the message.</p>

<p>When a process
receives an <em>ELECTION</em> message, it adds its own process ID to the list of processes i
in the message body and sends that message out to its neighboring process.
If a process receives an <em>ELECTION</em> message where its own process ID is at the head of the
list, it knows that is the <em>ELECTION</em> message that was started by this process. It
has traveled fully around the ring.</p>

<p>The sender looks at the list of active processes in the message body and chooses a
leader from among them. Since multiple elections may have been
started concurrently, the algorithm for choosing the leader must yield
the same result among the different list. Hence, selecting the highest
or the lowest process ID will work. Selecting the first or last process
in the list will not.</p>

<h3 id="changandrobertsalgorithm">Chang and Roberts algorithm</h3>

<p>The <strong>Chang and Roberts ring algorithm</strong> improves on
the ring algorithm in two ways. First, there is no need to keep
the entire list of live processes in the election messages;
we can perform the election as we go along.
If the goal is to vote for the highest-numbered live process ID and
a process receives an election message, it does one of two things:
(1) passes it untouched if its process ID is smaller than the one in
the message, or (2) replaces the process ID in the message with its
own if the process ID is greater than the one in the message.
When a process receives a message that contains its own process ID,
it knows that the message has come full circle and it is the
winner. It will then notify each process of the outcome.</p>

<p>The second optimization is to avoid having multiple election messages
circulate if multiple processes have initiated elections concurrently.
To do this, a process keeps track if it has participated in an
election (i.e., has initiated or forwarded an election message).
If a process receives a message with a smaller process ID than its
own <em>and</em> it is a participant in an election, it simply
discards the message. If, on the other hand, the received message contains
a greater process ID than its own, it will forward the
message even if it is a participant in an election since
the message contains a candidate that takes priority over the
previous one that was forwarded. Once election results are announced,
each process clears its status of participating in an election.
There is still the opportunity to have multiple elections circulate (no harm
done) but they are aborted when it makes sense to do so.</p>

<h3 id="partitions">Partitions</h3>

<p>One problem with election algorithms is when a network gets <strong>partitioned</strong>
(also known as <strong>segmented</strong>):
one set of processes is separated from another and cannot communicate with the other.
In this case, each segment may elect its own leader and each sub-group continues
with its own computations with results that diverge from each other, no longer forming a single cohesive distributed system.
This is a <strong>split brain</strong> situation.</p>

<p>One approach that is often taken to avoid this problem is to require a majority
of prospective leaders to be available. A <strong>quorum</strong> is the minimum number of processes that need to be available to
participate in an operation. In this case, the operation is an election and
we need a quorum of over 50% of the processes.
If a network is partitioned into
two or more segments, at most one of the partitions will have over 50%
of the processes. Those processes that do not will refuse to elect a leader.</p>

<p>Some clustered environments may employ a
redundant network or some alternate
communication mechanism, such a shared storage, to be able to check the state of remote processes and determine
if a process is dead or a network link is broken.</p>

							</section>
							<footer class="main">
								Last modified April  7, 2021.
								<hr/>
								<p class="copyright">&copy; Paul Krzyzanowski. All rights reserved.
								</p>

								<p class="copyright">
								For questions or comments about this site, contact Paul Krzyzanowski, 
								<span class="codedirection">gro.kp@ofnibew</span>
								</p>

		<img src="../../assets/images/recycled_pixels_logo.png" alt="recycled pixels" height="80" width="80" class="noprint" />

								<p class="copyright">
		The entire contents of this site are protected by copyright under national and international law. No part of this site may be copied, reproduced, stored in a retrieval system, or transmitted, in any form, or by any means whether electronic, mechanical or otherwise without the prior written consent of the copyright holder. If there is something on this page that you want to use, please let me know.
		
		Any opinions expressed on this page do not necessarily reflect the opinions of my employers and may not even reflect my own.
								</p>
								<p class="copyright noprint">
								Page design derived from: <a href="https://html5up.net">HTML5 UP</a>.</p>
							</footer>

						</div>
					</div>

		<!-- Sidebar -->
			<div id="sidebar" class="noprint">
				<div class="inner">

					<!-- Menu -->
<nav id="menu">
	<header class="major">
		<h2>Menu</h2>
	</header>
	<ul>
		<li><a href="../../index.html">Homepage</a></li>
		<li><a href="../index.html">Main course page</a></li>
		<li><a href="../syllabus.html">Syllabus</a></li>
		<li><a href="../news.html">Announcements</a></li>
		<li><a href="https://rutgers.instructure.com/courses/104885/assignments">Homework</a></li>
		<li><a href="../notes/index.html">Documents</a></li>
<!--
		<li>
			<span class="opener"> <a href="../exam/index.html">Exam info</a> </span>
			<ul>
				<li><a href="../exam/index.html">About</a></li>
				<li><a href="../exam/guide-1.html">Study guide 1</a></li>
				<li><a href="../exam/guide-2.html">Study guide 2</a></li>
				<li><a href="../exam/guide-3.html">Study guide 3</a></li>
				<li><a href="../exam/old/index.html">Old exams</a></li>
			</ul>
		</li>
		<li><a href="../grades.html">Grading info</a></li>
-->
		<li><a href="https://rutgers.instructure.com/courses/104885">Canvas</a></li>
		<li>
			<span class="opener">Course info</span>
			<ul>
				<li><a href="../about.html">About the course</a></li>
				<li><a href="../prereq.html">Prerequisistes</a></li>
				<li><a href="../things.html">Things you need</a></li>
				<li><a href="../policy.html">Class rules</a></li>
			</ul>
		</li>
	</ul>
</nav>

					<!-- Section -->
						<section>
							<header class="major">
								<h2>Get in touch</h2>
							</header>
							<p> For questions or comments about this site, contact Paul Krzyzanowski: </p>
							<ul class="contact">
								<li class="icon solid fa-envelope"><a href="#">
									<style type="text/css"> span.codedirection { unicode-bidi:bidi-override; direction: rtl; } </style>
									<a href="mailto:webinfo@pk@@org" onmouseover="this.href=this.href.replace('@@','.')">
										<span class="codedirection">gro.kp@ofnibew</span>
									</a>
								</li>
							</ul>
						</section>

					<!-- Footer -->
					<footer id="footer">
						<p class="copyright">&copy; Paul Krzyzanowski. All rights reserved.
						</p>


					</footer>

				</div>
			</div>
	</div>

<!-- Scripts -->
	<script src="../../assets/js/jquery.min.js"></script>
	<script src="../../assets/js/browser.min.js"></script>
	<script src="../../assets/js/breakpoints.min.js"></script>
	<script src="../../assets/js/util.js"></script>
	<script src="../../assets/js/main.js"></script>
	</body>
</html>
