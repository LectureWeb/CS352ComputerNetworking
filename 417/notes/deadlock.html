<!DOCTYPE HTML>
<!--
	Paul Krzyzanowski pk.org
	Derived from Editorial by HTML5 UP html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Distributed Transactions</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../../assets/css/main-article.css?v=1.3"/> <link rel="stylesheet" href="../../assets/css/ru-info.css?v=1.0" />
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
							<header id="header">
								<a href="../index.html" class="logo"><strong>Distributed Systems</strong>: Paul Krzyzanowski</a>
<!--
								<ul class="icons noprint">
									<li><a href="http://www.twitter.com/@p_k" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
									<li><a href="https://www.facebook.com/paul.krzyzanowski" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
									<li><a href="#" class="icon brands fa-snapchat-ghost"><span class="label">Snapchat</span></a></li>
									<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
								</ul>
-->
							</header>

							<!-- Content -->
							<section>
								<header class="main">
								<h1>Distributed Transactions</h1>
								<h2>Distributed deadlock</h2>

								<p>Paul Krzyzanowski</p>
								<p>March 24, 2021</p>
								</header>
							</section>
							
							<section id="bodytext">
								<blockquote>
<p><strong>Goal</strong>: Determine if a transactions will wait for resources in such a manner as to create an indefinite wait, called deadlock. Find ways to ensure that this will not happen.</p>
</blockquote>

<p>A deadlock occurs when there is a circular dependency on processes holding and
requesting resources.
The four conditions that must hold are:</p>

<ol>
<li><strong>mutual exclusion</strong>:
A resource can be held by at most one process.</li>
<li><strong>hold and wait</strong>:
Processes that already hold resources can wait for another resource.</li>
<li><strong>non-preemption</strong>:
A resource, once granted, cannot be taken away.</li>
<li><strong>circular wait</strong>:
Two or more processes are waiting for resources held by one of the other processes.</li>
</ol>

<p>Three approaches can be used for managing deadlock in distributed systems.</p>

<dl>
<dt>Detection</dt>
<dd> A <strong>centralized deadlock detection</strong> approach uses a central
coordinator to manage a resource graph of processes and the resources they
are using. Each time a process wants to grab or releases a resource, it sends a message
to this coordinator (<em>waiting-for</em> or <em>releasing</em>).
The coordinator builds a graph of all the processes and the
resources they are holding or waiting for. This is called a <strong>wait-for graph</strong>.
If a cycle is detected, in the graph then the
coordinator knows a deadlock exists. In some cases, if
<em>release</em> and <em>waiting-for</em> messages
are received out of order, they can lead the coordinator to believe that there
is a deadlock cycle when none really exists. In reality the <em>release</em> message should have been processed
first and would cause the deadlock to not happen. This condition
is known as <strong>phantom deadlock</strong>.</dd>

<dd> The <strong>Chandy-Misra-Haas distributed deadlock detection</strong> algorithm
has a process send a <strong>probe</strong> message to a process that is holding
a resource prior to waiting for the resource. The receiving process forwards the
probe to every process that contains resources it is waiting for. This is called <strong>edge chasing</strong>.
If the original process receives its own probe message then it knows that
a dependency cycle, and hence deadlock, will exist if it
waits for the resource it wants.</dd>

<dt>Prevention</dt>
<dd> Deadlock prevention approaches require processes to access resources in
restricted ways to ensure that a deadlock cannot occur. The approach
to implementing this is to make decisions based on the timestamps of
each transaction competing for resources.</dd>

<dd> The <strong>wait-die algorithm</strong> states that if a younger process
is using the resource, then the older process (that wants the resource) waits.
If an older process is holding a resource, then the younger process that
wants the resource kills itself (that&#8217;s ok; transactions are designed to
be restartable). This forces the resource utilization graph to be
directed from older to younger processes, making cycles impossible.</dd>

<dd> The <strong>wound-wait algorithm</strong> ensures that
the graph flows from young to old and cycles are again impossible.
an old process will preempt (kill) the younger process that
holds a resource. If a younger process wants a resource that an
older one is using, then it waits until the old process is done.</dd>

<dt>Avoidance</dt>
<dd> This requires predicting the precise resources that will be needed,
the times they will be needed, and which processes will need them and
manage resource allocation or transaction scheduling to ensure that
this will not happen. This is generally impossible to predict
and hence is not a practical approach.</dd>
</dl>


							</section>
							<footer class="main">
								Last modified April  7, 2021.
								<hr/>
								<p class="copyright">&copy; Paul Krzyzanowski. All rights reserved.
								</p>

								<p class="copyright">
								For questions or comments about this site, contact Paul Krzyzanowski, 
								<span class="codedirection">gro.kp@ofnibew</span>
								</p>

		<img src="../../assets/images/recycled_pixels_logo.png" alt="recycled pixels" height="80" width="80" class="noprint" />

								<p class="copyright">
		The entire contents of this site are protected by copyright under national and international law. No part of this site may be copied, reproduced, stored in a retrieval system, or transmitted, in any form, or by any means whether electronic, mechanical or otherwise without the prior written consent of the copyright holder. If there is something on this page that you want to use, please let me know.
		
		Any opinions expressed on this page do not necessarily reflect the opinions of my employers and may not even reflect my own.
								</p>
								<p class="copyright noprint">
								Page design derived from: <a href="https://html5up.net">HTML5 UP</a>.</p>
							</footer>

						</div>
					</div>

		<!-- Sidebar -->
			<div id="sidebar" class="noprint">
				<div class="inner">

					<!-- Menu -->
<nav id="menu">
	<header class="major">
		<h2>Menu</h2>
	</header>
	<ul>
		<li><a href="../../index.html">Homepage</a></li>
		<li><a href="../index.html">Main course page</a></li>
		<li><a href="../syllabus.html">Syllabus</a></li>
		<li><a href="../news.html">Announcements</a></li>
		<li><a href="https://rutgers.instructure.com/courses/104885/assignments">Homework</a></li>
		<li><a href="../notes/index.html">Documents</a></li>
<!--
		<li>
			<span class="opener"> <a href="../exam/index.html">Exam info</a> </span>
			<ul>
				<li><a href="../exam/index.html">About</a></li>
				<li><a href="../exam/guide-1.html">Study guide 1</a></li>
				<li><a href="../exam/guide-2.html">Study guide 2</a></li>
				<li><a href="../exam/guide-3.html">Study guide 3</a></li>
				<li><a href="../exam/old/index.html">Old exams</a></li>
			</ul>
		</li>
		<li><a href="../grades.html">Grading info</a></li>
-->
		<li><a href="https://rutgers.instructure.com/courses/104885">Canvas</a></li>
		<li>
			<span class="opener">Course info</span>
			<ul>
				<li><a href="../about.html">About the course</a></li>
				<li><a href="../prereq.html">Prerequisistes</a></li>
				<li><a href="../things.html">Things you need</a></li>
				<li><a href="../policy.html">Class rules</a></li>
			</ul>
		</li>
	</ul>
</nav>

					<!-- Section -->
						<section>
							<header class="major">
								<h2>Get in touch</h2>
							</header>
							<p> For questions or comments about this site, contact Paul Krzyzanowski: </p>
							<ul class="contact">
								<li class="icon solid fa-envelope"><a href="#">
									<style type="text/css"> span.codedirection { unicode-bidi:bidi-override; direction: rtl; } </style>
									<a href="mailto:webinfo@pk@@org" onmouseover="this.href=this.href.replace('@@','.')">
										<span class="codedirection">gro.kp@ofnibew</span>
									</a>
								</li>
							</ul>
						</section>

					<!-- Footer -->
					<footer id="footer">
						<p class="copyright">&copy; Paul Krzyzanowski. All rights reserved.
						</p>


					</footer>

				</div>
			</div>
	</div>

<!-- Scripts -->
	<script src="../../assets/js/jquery.min.js"></script>
	<script src="../../assets/js/browser.min.js"></script>
	<script src="../../assets/js/breakpoints.min.js"></script>
	<script src="../../assets/js/util.js"></script>
	<script src="../../assets/js/main.js"></script>
	</body>
</html>
